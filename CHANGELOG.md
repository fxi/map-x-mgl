
## Changelog
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.8.37-rc1' target='_blank'>1.8.37-rc1</a>
  - APP
    - Fix bug when having no view in project triggered an error in reactViewsCompactVector list ( used in source overlap tool )
    - Set map popup opacity at 0.7 (instead of 0.4) when mouse not hover
    - Migration during routines: impose sequential approach. Migration should always happen before dict update and index update. 
    - Search tool : should fix dates range issues, when a single date was set in date range input, the input was set empty (-> invalid), while the filter or/and badge were still active
    - Static mode : added button in legend's view title to open the metadata panel
    - Story maps : ignore invalid view id in views list evaluation. Those views id's probably have been added manually.
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.8.36-beta' target='_blank'>1.8.36-beta</a>
  - APP/API
    - Should solve issue with geometry validation tool not updated as a reactive select input not triggered
    - Quick solve issue with public list of view used in story map editor : bad commit at some point. TODO: use search api for instead
    - Set max upload size at 200MiB
    - Added new simple type conversions -> PG to js. Bigint were handled as string, which produced a bug
    - Fix wrong use of mglRemoveView -> app crashed when removing a view from 'manage external views'
    - Promoted use of promise in download source handler 
    - Fixed an issue with empty files being generated (txt.info and metadata.json)
    - Solved a bug where clicked features were not filtered properly, therefore, breaking the highlighter tool
    - Set max line for style dev editor : Infinity was not appropritate for large styles (performance drop)
    - Use chroma -> darken to set feature secondary color (e.g. polygon borders)
    - Lower opacity for map popup if mouse not over 
    - Modal body : presence of a unnecessary scrollbar : overflow auto only on y 
    - Fixed style issue with drop down filter menu in vector attribute table: bad zIndex of handsontable, as it's not relative to table's container 
    - Attribute table : issue with mouse hover patched this to solve highlight issue
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.8.35-beta' target='_blank'>1.8.35-beta</a>
  - APP
    -  Search tool :
      - Fixed issue with date input not linked to the filter 'badge'
      - Improved "year buttons" in result list : it should toggle between default value and selected value
    - Base admin sub national borders style : do not show before zoom 4
    - Dev style editor : do not try to diff at reset
    - Added modal panel to get search API key and configuration -> tools tab
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.8.34-beta' target='_blank'>1.8.34-beta</a>
  - APP
    - Integration of new UN layer for countries borders, countries names, and other official UN sub-national borders when available; Tweaked style : added an attribute 'group_size' to deterministically set country label style according to country size (countries classified on a scale from 0 to 100, based on geographic area)
    - To facilitate map style development: Added a minimal style editor mapbox-gl-js (json) to quickly test the style tweaks. Available using `mx.helpers.showDevStyleEditor`
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.8.33-beta' target='_blank'>1.8.33-beta</a>
  - APP
    - Search tool :
      - Button "Clear search" has now an "undo" icon, and triggers reset year filters too. It's disabled if no text, year or facet filters are set.
      - Red flag/badge is now visible if year filters are set, too.
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.8.32-alpha' target='_blank'>1.8.32-alpha</a>
  - APP
    - Added basic user preference storage ( not yet available in UI )
    - Reworked temporary view management : store preference; added "unlink" button to remove temporary view; text changes
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.8.31-alpha' target='_blank'>1.8.31-alpha</a>
  - API/APP
    - Improved handling of view not linked, added using drag-drop or search tool 
    - Fixed missing license in source metadata viewer
    - Fixed issue with local cache, that was hanging sometimes
    - Various minor changes in UI, e.g. views badges colors
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.8.30-alpha' target='_blank'>1.8.30-alpha</a>
  - API
    - Faster vector source bounding box. E.g. used in vector views -> Zoom to extent. This issue penalized some features such as views settings or static viewer.
  - APP
    - Fixed bug where sprites/pattern were not shown in legends,
    - Bug correction / improvement: partial refactoring of the construction of vector layers. Should be faster, while rendering the order correctly, especially when using overlay patterns using sprite.
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.8.29-alpha' target='_blank'>1.8.29-alpha</a>
  - APP
    - Solves missing sprites in legends; 
    - Cleaning old 'resources' config from legacy mapx version -> probable breaking changes
    - Minor improvements of the search tool
      - Sync date keyword with slider + keyword emphasis
      - Solve nested facet groups not updating order when filtered
      - Year range slider: allow partial date ranges instead of strict min/max bounds.
      - Metadata viewer : handle cases where no concept is set
      - Fixed broken external link button 
    - Gemet search + dropdown :
      - Avoid displaying full description of gemet dropdown: use tooltip instead, but keep the same heading. 
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.8.28-alpha' target='_blank'>1.8.28-alpha</a>
  - API :
    - Missing 'create extension pg_trgm' in migration script
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.8.27-alpha' target='_blank'>1.8.27-alpha</a>
  - APP / API
    - GEMET 
        - Reshaped gemet local db,
        - Integration of multilingual keywords from gemet in the search index generator,
        - Modified api search by text, by list of concept : faster, more accurate, query by multiple concept ids,
        - Adapted metadata visualizer,
        - Integration of multilingual GEMET keywords in the search tool
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.8.26-alpha' target='_blank'>1.8.26-alpha</a>
  - APP
    - GEMET 
        - Integration of gemet keywords translation in view metadata visualizer. With link to concepts.
        - Integration of gemet concepts search in the source metadata editor
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.8.25-alpha' target='_blank'>1.8.25-alpha</a>
  - APP
    - Search tool: Minor update. 
      - Advanced date search in dedicated panel; 
      - Source data date start and end do no use date range anymore; 
      - Range year selection have a title; 
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.8.24-alpha' target='_blank'>1.8.24-alpha</a>
  - APP
    - Search tool : added range slider to filter view by generic years
  - API
    - Search indexes include many new fields for filtering by years + optimisation
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.8.23-alpha' target='_blank'>1.8.23-alpha</a>
  - APP 
    - Search tools :
        - Better performance
        - Solved 8/12 issues reported in <a href='https://github.com/unep-grid/map-x-mgl/issues/663#issuecomment-843229152'>663</a>
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.8.22-alpha' target='_blank'>1.8.22-alpha</a>
   - APP
    - Search tool : the list of results is visually simpler. Border, shadow and unnecessary styles have been replaced by a better position of elements.
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.8.21-alpha' target='_blank'>1.8.21-alpha</a>
   - APP
     - Search tool improved look and performance, less space wasted + added search stats line;
     - Modified immersive mode definition: all registered button-panels instance are hidden;
     - Solved a bug where view's summary did not render correctly for multi-lingual items, such as project tiltles;
     - Views list, recursive sorting of the list : sorting impacts views order inside nested groups. Should not alter ancestors. Required for consistency and for testing rendered order.
   - SDK
     - Solved issue with immersive mode set/get and panels show/hide open/close. Should solve #670 
     - Added JSON export to tests
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.8.20-alpha' target='_blank'>1.8.20-alpha</a>
   - APP
    - Solved an issue with EPGS code searching
   - API
    - Solved an issue with missing server-side translation
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.8.19-alpha' target='_blank'>1.8.19-alpha</a>
   - Merged search feature in master 
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.8.18-alpha' target='_blank'>1.8.18-alpha</a>
   - APP/API
    - Added prototype for instant search on MapX public catalog
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.8.17' target='_blank'>1.8.17</a>
   - APP
    - Fixed project changes when swiping the projet list with touch devices
    - Tooltip removal for touch device in previous revision was not effective, as only the dynamic tooltip placement was affected, the style was still visible.
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.8.16' target='_blank'>1.8.16</a>
   - APP
    - Fixed a visual issue in mobile devices, where the lower part of a full height element was hidden behind the browser navigation bars.
    - Removed tooltips for touch device + added listener to properly cancel tooltip when the pointer leaves a tooltiped element
    - Attempt to mitigate fragile websocket connection, enable 'allow reconnection'.
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.8.15' target='_blank'>1.8.15</a>
   - APP
     - Solved issue when creating new raster view: layers were added even when no sources or tiles were configured, which produced errors messages in the console.
     - Modal : hide foot text for small screens; 
     - Dropdown select with additional options allowed ( e.g. tags ): added padding. Adding tag is more visible. The user can click on an enlarged button or use the tab key to enter new tags.
     - Project list: show only higher role to save space.
     - Modal: removed bottom margin due to a max-height, in small screens. 
     - Views list: removed view badges for small screens as there is not enough space.
     - Improved main panel layout upper buttons (title, language, user). 
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.8.14' target='_blank'>1.8.14</a>
   - APP
     - Added SQL patch to improve fetching the latest version of views
     - Minor improvement in sources management tools, that could improve MapX loading time
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.8.13' target='_blank'>1.8.13</a>
   - APP
    - Fixed issues with auto-resize control panel feature: in horizontal layout the calculation was wrong and sometimes the panel button overlapped with the control buttons
    - Auto translated application texts have no more asterisk in suffix. Instead, a better explanation is written in the language selection panel
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.8.12' target='_blank'>1.8.12</a>
   - APP
      - Controls panel : auto-resize. Not perfect, but cover most cases.
      - Storymap : added rotation buttons in control panel
      - Draw : improved UI/UX, added circle tool
      - Modals, new modal type: async prompt. Let the user enter value. Used in draw tool > polygon > circle > radius  
      - Widget container in dashboard did not react to touchmove event, when widget size was larger than the dashboad size.

- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.8.11-beta' target='_blank'>1.8.11-beta</a>
   - APP + API
      -  Refactoring of the lateral controls toolbar.
      -  Patched overflow issue with CSS tooltip. Hovering a tooltip element trigger a tooltip even if the element is nested in a container with overflow not visible: e.g. in views filter.
      -  Solved language auto translation issues with templates (double bracket, sprintf) and html. Order of tags were altered by the translation system.
      -  Removed cookies from MapX -> replaced with localstorage methods. When removing the cache, this storage will also be cleaned.
      -  SDK : improved consistency. It's now possible to set the MapX encrypted token from the SDK. Solved some issues with MapX resolvers. The testing script should be ported to a standard test system, but in the meantime, this commit solved some issue with it. 
      -  Rewrote most of the drawing tool using better object oriented methods. For the user, change will be visible in buttons, general layout and modal prompts.
      -  Improved notification center and removed app errors from notification - use console instead.
      -  Adaptation of the story map module to the new controls : added step configuration for displaying 3d relief and default aerial base layer. Support for escape keystrock to quit the story map to match most video player behavior. Simplified a lot the "auto scroll" function. Stability should be improved in case of very fast step changes.
      -  Overall style rewrites : better support for small screens. Not perfect, but better.
      -  Download : solved a bug when the download layer did not have proper title in other languages than English.
      -  Many minor changes
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.8.10-beta' target='_blank'>1.8.10-beta</a>
   - APP + API 
      - Changed .gitignore to allow _built and _cache being committed
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.8.9-beta' target='_blank'>1.8.9-beta</a>
    - APP
      - Issue #657 should be solved : views' functionalities not properly removed after project or role change. 
      - Issue regarding the profanity checker. Words collection for Arabic language produced an error. This should have been solved.
      - Views + category list : fixed a style issue with nested categories shadows in a collapsed parent category. 
    - APP + API
      - Missing MapX app related text is automatically translated when building internal dictionary. Original dictionaries are not modified. Descriptions, abstracts, and any sensitive or contextual non-MapX text is not translated automatically. If a text has been translated, an asterisk is shown. A message describing this is also shown during language change. This has been done to mitigate the growing issue regarding the lack of contributions for our translation system for technical terms and templates. Contributions are welcome ! 
      - Reorganization of dictionaries in the project.
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.8.8-beta' target='_blank'>1.8.8-beta</a>
    - API 
      - Added migration step for making sure postgres 'track_commit_timestamp' is set.
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.8.7-beta' target='_blank'>1.8.7-beta</a>
    - APP
      - Using Mapbox satellite base map for "aerial theme". 
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.8.6-beta' target='_blank'>1.8.6-beta</a>
    - APP 
      - SDK : updated function to open/close views/settings panel 
    - API ( internal )
      - Upgraded docker image to node 15.08
      - New module for forward only, transactional SQL migration patching. With lock support.
      - Translation table available and automatically updated in DB
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.8.5-beta' target='_blank'>1.8.5-beta</a>
    - Improvement
      - Issue #635:
        - Better handling when a user access a private project whithout being logged in. The default project is shown, with all views.
        - If requested views are not available, a message is shown, and all views are displayed.
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.8.4-beta' target='_blank'>1.8.4-beta</a>
    - Bug fixes
      - Stability and improvement from previous 1.8.* changes 
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.8.3-beta' target='_blank'>1.8.3-beta</a>
    - New feature
      - APP
        - Added for M49 official geographic keywords in the source metadata editor. This will be improved in the future.
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.8.2-beta' target='_blank'>1.8.2-beta</a>
    - Bug fixes
      - Stability and improvement from previous 1.8.* changes 
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.8.1-alpha' target='_blank'>1.8.1-alpha</a>
    - Bug fixes
      - Internal checklist
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.8.0-alpha' target='_blank'>1.8.0-alpha</a>
    **NOTE: preview version, not tested**
    - Improvement
      - App: 
         - UI update. Unification of buttons, panels. 
         - Better UX with fixes requested in #617, #618, #619
         - Start uniformization of notification with the "Nofification center". For now, only message sent during download and email feedback is sent. Once stable, will cover all async and long processes: attribute table, overlaps, upload, etc. 
         - Geoserver Async call with email feedback for views and source update. All requests were blocking. It should be a lot faster now
         - Experimental shiny-server removal, as it was interfering with the docker logic when a process was failing. We rely on direct connexion. Traefik should ensure sticky connexion. 
         - Minor changes.
      - Api:
        - Major refactoring:
           - All modules are required using unfied '@mapx/<module>'.
           - Translation system ported.
           - Email templating ported.
           - A lot of migration from promises chain to async/await.
           - Websocket with authentication (now used only for upload progress). Backward compatible with HTTP partial write. 
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.7.11' target='_blank'>1.7.11</a>
    - Improvement 
      - App : changed country label + style to better match UN clear map
      - SDK : Better testing + allow passing function as text through messaging system 
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.7.10' target='_blank'>1.7.10</a>
    - Bug fix
     - When editing and previewing large story maps, fixes an issue with legends not being rendered, which blocked subsequent operations.

- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.7.9' target='_blank'>1.7.9</a>
    - Bug fix
     - Linkage between download source and manage source reactive object was not set properly. Table of view did not appear, and validation was not performed

- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.7.8' target='_blank'>1.7.8</a>
    - Bug fix
      - Tools source manage : typo. Produced an error and the app crashed when a source was edited.
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.7.7' target='_blank'>1.7.7</a>
    - Bug fix
      - URL query string parameter "theme" e.g ?theme=smartgray ?theme=nolabdark did not work
    - Improvement 
      - Added missing dictionnary item for map feature highlight
    - Internal
      - Removed unused file
      - Set `el` package to version 0.1.5, removed babel config, as microbundle has some sensible defaults.
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.7.6-beta' target='_blank'>1.7.6-beta</a>
    - Bug fix
      - Fix bug where requested theme color item did not return in static mode
      - Fix missing string `filterActivated` in sharing url
      - Fix issue with highlight not displayed in dashboard mode w/o popup

- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.7.5-beta' target='_blank'>1.7.5-beta</a>
   - Improvement 
      - Language : support for Chinese. Thanks Tuo Wang and Jingyi Jiang !
      - Sharing manager : new options to filter views and hide category in the views' list
      - Highlight tools : 
          - Support for GeoJSON view
          - Added theme entry to set highlight color
          - If the popup close, remove the highlight layer
          - Use color property of highlighter feature instead of opacity, as layer opacity is managed by the transparency slider only.
          - General improvement and stability. Still experimental.
          - More subtile animation
      - Style creator, change remaining defaults requested in #596
   - Bug fix
      - Reordering layer was done before all layers were displayed resulting to inconsistancy
   - Internal
      - Removed most of the method to convert colors and use chroma-js instead to improve robustness with edge cases.

- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.7.4-beta' target='_blank'>1.7.4-beta</a>
   - New feature
      - APP:
        - Implemented new module to highlight things when clicking them on the map. Experimental.
   - Changes
      - API
        - Set postgres timeout as settings. 
      - APP
       - InconFlash is now a module. Added example of usage. 
   - Bug fixes
      - APP
        - Fixed issue with legend displayed incorrectly
      - APP/API 
        - Fixed some cache issue 
   - Internal
      - API
        - Fully rebuilt API image on node:12.19-alpine
          - Compiled GDAL 3.1.3 from scratch add needed modules + solve dependencies issue
          - Added tags to base image instead of latest
          - Set higher memory limit for node : 4GB

- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.7.3-beta' target='_blank'>1.7.3-beta</a>

   - Bug fixes
      - APP
        - Solved a bug when minicache encountered html values; 
   - Improvement 
    - APP/API
        - Source summary, allow all binnings method to have bounds from a single number in case of very skewed distribution (#596) ; 
    - APP
        - Better modal background : use pseudo-elements. It should avoid having modal siblings still accessible when background is set.
        - Added reverse mode in palette colors.
        - Set icon flash as a module using class. 
        - Added better click visual feedback on views panel - could be ported to the whole app.
        - Refactoring cache / fetch  management for wms and source summary:  
        - Unifiyng TTL and timeout (app side);
        - The button to remove cache has a confirmation step; It will remove all cache and stored data know to MapX. At least, what is accessible by  service workers and localforage; It does not trigger a reload anymore.
        - Source summary for views add a first step, no cached, to get source timestamp. This should avoid issues when the source is modified during a session. 
        - Partial rewrite of main dot templates: more flexibility to partial view UI loading. 
        - Filter tools are now generated only on demand. They need cached response of summary. Should be invalidated if the source or the view change.
 
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.7.2' target='_blank'>1.7.2</a>

   - Improvement
      - APP/API
        - Added application_name parameter in api and app. This parameter is usefull to perform request on DB `SELECT usename, application_name, state FROM pg_stat_activity`.
        - Removed references to a master connexion from the app : a single pool of connexion is used instead of two. Access to a master DB in case of DB clustering could still be made using `NO LOAD BALANCE` header in queries string.
        - Rewrote mapx specific wrappers around library pool functions.
        - Using onStop shiny function to launch cleaning steps should guarantee that no pool remains un-closed, and therefore avoiding memory leaks. Previous approach was made using the .Last command which is fired at the end of the R session. Maybe a combination of the two approaches could even be better.

- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.7.1' target='_blank'>1.7.1</a>

   - Bug fixes
      - APP/API
       - Bug generated by previous fix : can't ignore empty string in numeric variables

- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.7.0' target='_blank'>1.7.0</a>
   
   - Bug fixes
      - APP/API
        - In style form and summary stat, changed the limit of distinct values for categorical variables in list and table to 1e4 instead of 100; Removed nulls and empty strings from lists as they will be managed by the 'missing values' section

- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.6.115-beta' target='_blank'>1.6.115-beta</a>

   - Bug fixes
      - APP: 
        - Add the timestamp of the source to tile request, to invalidate browser or service worker cache.
        - mx_valid module: Add regex rule to accept `_o_` in source id suffix
        - Fixed issue when wms url is wrong or missing; 
        - Removed abstract from wms list, set abstract content as (native) tooltip
        - Solved issue where null values where filtered out after numeric slider update

- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.6.114-beta' target='_blank'>1.6.114-beta</a>
  - Bug fixes
      - APP/API 
        - Solved an issue with cached source summary (extent, table, etc)
        - Added a compatibility bridge for dot template that still use stat stored in views object
      - APP
        - Attribute table : wrong type for string -> should be 'text' in handsontable. 
      - API
        - Set default 'simple type' to 'string' -> if unexpected type, display as string

- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.6.113-beta' target='_blank'>1.6.113-beta</a>
  - Bug fixes
      - SDK : polyfill for <element>.contains method seems fail. Replaced with querySelector. Updated module list in app and sdk

- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.6.112-beta' target='_blank'>1.6.112-beta</a>

  - Bug fixes 
      - APP :
        - Download raster -> wrong file type
        - Zoom to wms raster 
        - Filter by missing value (legend + popup) did not work
        - Popup : value 0 produced "missing value" message
        - First style of a new view : failed to detect attribute type
        - Buttons 'find extent', 'zoom to displayed features', 'show attribute table' was visible event for new vt view without source
        - JSON schema based form : diff message was shown even when no diff between locally saved data and data from db, if the timestamp was not the same. 
        - Dynamic layer list was not invalidated after uploading a new source or creating a new source using the overlap tool
        - Default opacity set to 0.7 for rules and null rule.
  - Improvement
      - SDK
        - Better README.md
       
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.6.111-beta' target='_blank'>1.6.111-beta</a>

  - New features
      - APP
        - loadHighcharts / dashboard : added `exporting` and `export` data modules for highcharts
        - Style rule parser :
           - Added option to handle upper bound inside intervals. Both option and logic are supported now.
           - Partial refactoring: reduce code size, use async / await instead of chaining promises
  - Bug fixes
      - SDK
         - Issue with dependencies strangely not included in build. Need maybe further investigation
      - APP 
        - Excluded remaining swp file from precaching, which caused an error in console
        - Issue with path construction for the download file link in download modal
        - Source summary:  In case of error, return default and consol.warn instead of blocking. It could be expected in some cases and MapX should work without it
        - View GeoJSON: added back 'zoom to visible features' with fallback to 'zoom to extent'
        - Dashboard: added template value in script parsing rejection message

      - API
        - Source summary : allow spaces in attribute names
        - Invalidate tile cache if the source, the mask or the attributes requested change
  - Internal 
      - Ignore module dist folder

- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.6.110-beta' target='_blank'>1.6.110-beta</a>
  - Bug fixes
      - API
        - Source summary, variable binning : solved an issue with max upper class, wrong binning when using integers, minor changes
      - APP
       - View 'auto style': Added a validation to test for duplicated rules. Could occurs when using quantile and a skewed distribution.
       - Service worker : precache list included .DS_Store file, but ignored by git and dockerfile. Produced 404 errors. Solved by modifying the regex in the webpack prod file.

- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.6.109-beta' target='_blank'>1.6.109-beta</a>

  - Improvement
      - APP
        - Auto style editor : binning method have translated label
        - Vector view edit : a button to request source summary has been reactivated with the new stat summary overview
  - Bug fixes 
      - APP
        - Source summary. 
          - Total count did not match class count. 
          - Default and validation in APP did not match validation in server resulting in a number of class by default in UI,  if it was not valid server side.

- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.6.108-beta' target='_blank'>1.6.108-beta</a>

  - New feature
      - APP 
        - Automatic style creator based on stats produced by the API (experimental)
        - New color picker : palettes are handled by the automatic style creator
  - Internal
     - APP: eslint step before any build, reorganising dot files.

- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.6.107-beta' target='_blank'>1.6.107-beta</a>

  - New feature
      - APP : new method to ease fetching data through MapX mirror.
  - Improvement
      - API : simplify mirror method, copy back the response headers. 
      - APP, WMS interaction : exception as image; added busy interface when waiting.
  - Bug fixes
      - APP, WMS request: solved issue occuring with with empty styles in getMap request.
      - APP: Solved internal bug occuring when a new view without sources was saved.
      - APP, error manager : Error message not correctly displayed when extracting promise error message.

- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.6.106-beta' target='_blank'>1.6.106-beta</a>

   - New features
       - API: Source summary can now return automatic binning for a continuous variable. Method implemented : jenks, equal_interval, heads_tails, quantile. e.g. `idSource=<id of the source >&idAttr=<variable name>&binsMethod=<jenks | equal_interval | heads_tails | quantile>&binsNumber=< integer >0 & <= 100>`
- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.6.105-beta' target='_blank'>1.6.105-beta</a>
    - Internal
       - API : remove token based restriction on route `/get/mirror` as it prevented usage from static site.

- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.6.104-beta' target='_blank'>1.6.104-beta</a>

    - Improvement
       - APP, SDK : Added a test to control that the worker code match the manager version. An error is reported within the  messaging system if there is a mismatch. e.g. `mapx.on('message', (m)=>m.level=='error'?console.error(m.text):console.log('not an error'))`
    - Bug fixes
       - API : tile cache was not invalidated properly after the view's attributes list modification
    - Internal 
       - APP, ViewsFilter : all toggles are now called checkboxes.
       - APP, SDK : ( PR #564 ) tests can be launched by group, via a parameter in the URL.

- <a href='https://github.com/unep-grid/map-x-mgl/tree/1.6.103-beta' target='_blank'>1.6.103-beta</a>
    - New feature
       - SDK : Set/Get views filter. The view list can be managed from new method in the SDK. See issue #576 for details.

- 1.6.4 - 1.6.102 
    
    - Note: Changelog will be completed at that point. See commit messages for details.

- <a href="https://github.com/unep-grid/map-x-mgl/tree/1.6.4-beta">1.6.4-beta</a>

    - New feature
       - New view integrated filter system : search using text with basic regex parsing, tags, activated views. Tags order reacts to language change. Two mode are available: union and intersection. Views count is more accurate and match all kinds of filters.
       - Views list : views can be repositioned with a wide range of options : date, title, drag and drop, relative position. A history of changes is kept. The order can be saved. Nessted groups can be created. Groups can be created, deleted, edited. All options are available with a right click in the list that produce a contextual menu. Content change according to click location. 
    - Improvement
      - APP
       - Internal unified event and listener management
       - Code refactoring : code rewrite using more strict structure, transfer method in dedicated modules (work in progress)
       - Remove direct access to an attribute table from a view if "allow download" in the source settings is not set 
       - Minimize button in modal window
       - Set file size limit for upload   
    - Bug fixes
      - APP 
        - In select box, drop-down menu always visible.
        - Story autostart has been reimplemented
        - Story map slides effect
        - The project spatial parameters are not reset on the map after a save
        - Various fixes
    - Breaking changes
      - API
        - We do not use connection pool : pooling should be done by a sensible pooling system, like pg_pool.
        - Instead of using OGR to transfer spatial data to the DB, a first step with "PGDump" is made, then the result is piped through psql.

- <a href="https://github.com/unep-grid/map-x-mgl/tree/1.5.54">1.5.54</a>
    - Improvement 
      - APP 
        - Added new contact field in project's role settings 
      - APP/API
        - Added text version of html email messages
- <a href="https://github.com/unep-grid/map-x-mgl/tree/1.5.53">1.5.53</a>
    - New feature
      - APP 
        - New 'root mode' that allows platform administrators to switch user in order to solve issues.
    - Improvement
      - APP
        - Login messages for single use passwords or tokens are sent using an html template instead of raw text.
- <a href="https://github.com/unep-grid/map-x-mgl/tree/1.5.52">1.5.52</a>
    - Improvement
      - APP 
        - Added options in projects to enable or not the join buttons to request membership see issue #251; 
    - Bug fixes
      - APP
        -  Fixes a bug where a guest user could see the join buttons
- <a href="https://github.com/unep-grid/map-x-mgl/tree/1.5.51">1.5.51</a>
    - Improvement
      - APP 
        -  Cleaned configuration files
        -  Added email configuration for setting default emails : bot, admin, guest.
- <a href="https://github.com/unep-grid/map-x-mgl/tree/1.5.50">1.5.50</a>
    - Improvement 
      - APP Added logic to remove service worker and cache if there is not enough storage space in the browser. See issue #441.
- <a href="https://github.com/unep-grid/map-x-mgl/tree/1.5.48">1.5.48</a>
    - Improvement
      - API
        - Added exposed header : content-length;
        - Set zip encoding as an option in sendJSON
      - APP
        - Attribute table modal: remove buttons if no data.
        - Jump to location at project change instead of fly to position;
        - Better performance and refactoring of the project list renderer;
        - Progress Radial : added animation frame support;
        - Merge pull request #435 from antobenve/master : style instead of styles in WMS request
        - Added diaf score / summary in metadata window in addition to the full diaf table; added link to raster metadata; Remove the homepage link to source title: use distinct homepage link and list of download/source link; should solve feature requests from #423
        - Added progress bar support in attributes table
    - Bug fixes
      - App
        - Solve issue where validation message did not work : login window, new view name, new project name, etc..
- <a href="https://github.com/unep-grid/map-x-mgl/tree/1.5.47">1.5.47</a>
    - Improvement
      - APP
        - Map Composer : new feature : change font size of current item; better resolution handling; various fixes;
        - Share manager : add auto start option for story map
        - Dashboard : add an option to ignore or not events that return no data or an empty array. Added callback arguments in widgets; Solved issues with dashboard modal window title;
        
- <a href="https://github.com/unep-grid/map-x-mgl/tree/1.5.46">1.5.46</a>
    - Improvement
      - APP
        - Map Composer : removed dependencies on medium-editor and interactjs use custom ones; Added new features to set page size, units and other settings.
- <a href="https://github.com/unep-grid/map-x-mgl/tree/1.5.45">1.5.45</a>
    - New feature
      - APP
        - Each view based on a vector source have now a button to display the full attribute table of the source. There is a filtering system by attribute that will also filter the displayed elements on the map. The table can be exported as CSV.
- <a href="https://github.com/unep-grid/map-x-mgl/tree/1.5.44">1.5.44</a>
    - New feature
      - APP
        - Map composer - early version. A module to compose a map based on currently visible views
- <a href="https://github.com/unep-grid/map-x-mgl/tree/1.5.43">1.5.43</a>
    - Bug fixes 
      - APP
        - Solved issue with secondary attributes that were unselected during view edit.
- <a href="https://github.com/unep-grid/map-x-mgl/tree/1.5.42">1.5.42</a>
    - Improvement
      - APP
        - Added support for languages in forms validation + french translation
        - Allow GeoJSON view direct download
        - Full rebuild of modals
        - Added support for languages in color picker
        - Added support for languages in recovery system
        - Minor translation changes. See #327.

- <a href="https://github.com/unep-grid/map-x-mgl/tree/1.5.41">1.5.41</a>    
    - Improvement
      - APP
        - Story map :
          - Editor translation in french
          - Full rebuilt UI renderer
          - Added tips section in editor
        - Style editor : support for style size by zoom ( point and lines )
      - APP/API
        - View metadata : faster, available using api, UI built client side.
        - Added support for SRS assignation for data upload should add support for DXF/CSV. See #413; 
        - Improved EPSG search module;
        - Removed _mx_valid column from attributes fields and schema, as requested in #410
    - Bug fixes
      - APP
        - Story map : fix issue with external view as object instead of the expected view id string.
        - #410 : 
          - Removed _mx_valid column from list attributes fields and schema in forms
          - Fix legend filter not cumulative
    - Other :
      - APP
        - Removed loop optimisation. Loop optimizer have some issue when used in expression : the for loop was rebuilt outside scope;


- <a href="https://github.com/unep-grid/map-x-mgl/tree/1.5.40.2">1.5.40.2</a>
    - Improvement
      - APP/API
        - Starting code style validation using JSHint. See .jshintrc. This implies majors changes in all js, css, and html files. This will be a long incremential work.
      - APP
        - Dashboard button activate when there are widgets.
        - In draw mode, popup does not show anymore if clicked on a feature
    - Bug fixes
        - API
        - Issue with geometry validation: auto-correction / validation did not work due to typos and logic Separate json and xml utilities

- <a href="https://github.com/unep-grid/map-x-mgl/tree/1.5.40.1">1.5.40.1</a>

    - Bug fixes 
      - API 
        - Fix bug where overlap analysis produced an auto-correction 
    - New features 
      - APP
        - Draw tool. `mapbox-gl-draw`
        - Geojson view creation using resulting draw 

 - <a href="https://github.com/unep-grid/map-x-mgl/tree/1.5.40">1.5.40</a>

    - Improvement 
      - APP 
        - Unified methods to retrieve click based map query on MapX layers : one function is used for dashboard events, map popup event, for both raster and vector source 
    - New features 
      - APP 
         - Raster views and custom code views have a dashboard functionality 
         - The click event in dashboard is usable for querying raster sources.

- <a href="https://github.com/unep-grid/map-x-mgl/tree/bbb37f">1.5.30</a>
    - Improvement
      - API/APP
          - Create new source based on overlap analysis
          - Download authentication. Now, same method as upload and overlap, with encrypted token
          - Download and clip : validate beforehand instead of failing in ogr2ogr step
          - Color in logs
          - Download, uploads and overlap have an unified interface for logs
          - Logs autoscroll
          - Version in tools panel solved : index.html was not re-build when webpack build prod version
    - Bug fixes
          - Broken uploader
       
- <a href="https://github.com/unep-grid/map-x-mgl/tree/ce3d0d54c1">1.5.29</a>
    - Iprovement
      - APP
          - Batch screenshot creation
          - New layout for view description, should solve a bug in windows Chrome browser where legends were not rendered
          - Set application update as optional. At least, warn the user that an update is ready.
          - Better modal window
    - New features
      - API
          - Implemented precise area calculation of overlap between countries and selected layers.
          
- <a href="https://github.com/unep-grid/map-x-mgl/tree/5515f88ef71">1.5.27</a>
    - Improvement
      - APP
          - Better loading screen : higher z-index, block events when the app is busy, smooth transition back, when the loading is done
          - Support for attribut alias in metadata
          - Better tool for download pdf : cleaner, faster. 
          - Trigger layer list  when an upload is done
          - Meta data editor, now in two steps: no more wait on the first data editor to load
          - Layer management: hide linked source summary
          - Less waiting time when loading project list
          - Code refactoring : regroup reactive function by type. Should solve actions duplicate.
    - New feature
      - API 
          - Method to get source metadata : "/get/souce/metadata:id"
- <a href="https://github.com/unep-grid/map-x-mgl/tree/11f89e4fea966169df9089d5c2ca15b301a575c5" target="_blank">1.5.26</a>
    - Improvement
      - APP
          - Update build process : use smaller chunks – issue with babel loader that produced huge chunks –; add promise polyfill, manually add manifest, minor changes;
      - API
          - Added new numeric parser to avoid bug in tiles where numeric was converted to string. This is related to style on numeric columns not correctly handled.
- <a href="https://github.com/unep-grid/map-x-mgl/tree/bba8abc110f67d7654a509099cc85a3f683b244e" target="_blank">1.5.25</a>
    - Improvement 
      - APP 
          - Upgrade all dependencies, fixes related issues
          - Upgrade build system to Webpack 4
          - Solve issues with translation rendering in metadata viewer 
- <a href="https://github.com/unep-grid/map-x-mgl/tree/20067870e8cbaf11af66ddfba39f2612c439236c" target="_blank">1.5.24</a>
    - Improvement
      - APP : Testing session reconnection
      - APP : Instant estimate of overlap area
    - Bug fixing
      - APP : Overlap function in PixOp had issue with lines: the first coordinate of each line could have been omited.
      - APP : Changed the regular expression that "validate" email to a more strict one. 
- <a href="https://github.com/unep-grid/map-x-mgl/tree/144d2a37bd30955c4ad8a3b5081db25b18625d97" target="_blank">1.5.23</a>
    - Improvement
      - APP : save and update query parameters: project, language, lat, lng, zoom. 
    - Bug fixing
     - APP : Overlaps using pixop, numbers of layers to take in account did not unterstood "All layers". Should be ok
- <a href="https://github.com/unep-grid/map-x-mgl/tree/9557502329e34b821f6c4df0e9aaf3bb1f12edaa" target="_blank">1.5.22</a>
    - Improvement
      - APP/API Let the user provide a projection system for download
      - APP : add basic option for highlight overlap tools
      - APP/API : new environment variable to store tokens and allowed user id as creator
      - APP : Add public view from public project in story maps available views
- <a href="https://github.com/unep-grid/map-x-mgl/tree/8ebeae87833c8447041669db0a45c6d77625319f" target="_blank">1.5.21</a>
   - Improvement
      - API : Set pre-simplification only for zoom > 10 in postgres. 
      - APP : Added new environment variables for handling mapbox token and allowed project creators
- <a href="https://github.com/unep-grid/map-x-mgl/tree/61b5592bdf2de9afb14a4bf1cf1713571e0ca0b1" target="_blank">1.5.20</a>
   - Improvement
      - Added an experimental tool to highlight potential overlaps between vector layers
    - Bug fixing
      - Story map bullets werent removed due to a DOM issue 
      - Confidentiality issue : a publisher with edit access to a story map editor was able to list and use views from a private projects to which she had no access. This could still occurs if the view is purposely shared or imported as public view to another non-private project.
- <a href="https://github.com/unep-grid/map-x-mgl/tree/bc81b623ce09bc1359857c5e9cce00f8a1c24854" target="_blank">1.5.19</a>
   - Improvement
      - Added support for quering wms based raster source layer
- <a href="https://github.com/unep-grid/map-x-mgl/tree/caaee2e9be52711da3c0805da215140653661d59" target="_blank">1.5.18</a>
   - Improvement 
      - Added support for download sources as CSV #212
      - Added projection data when downloading geospatial files #322
   - Bug fixing
      - Solved issue when images in legend where broken into multiple columns #324
   - Rollback
      - Remove privilege to create new project for everyone. Only selected user can create new project.
- <a href="https://github.com/unep-grid/map-x-mgl/tree/d02a7ce3c3985fe8629efb324014871881b70c9a" target="_blank">1.5.17</a>
   - Improvement
       - Add current view count in filters by category
       - Style minor change in filter by labels and filter by attributes 
- <a href="https://github.com/unep-grid/map-x-mgl/tree/7362a8457e76cea32dca9fb1367edfe78660736f" target="_blank">1.5.16</a>
   - Improvement 
       - Modal Added four preset button for modal panel, added an option to resize panel horizontally.
       - Added autoprefixer for CSS in webpack config
   - Bug fixing
       - Dashboard modules could be ignored after a view edition. In case of only one module, the script automatically converted the value in a JSON string, and the dashboard was expecting an array. The `module` key in the `view.data.dashboard` can now be a string or an array. Or empty.
- <a href="https://github.com/unep-grid/map-x-mgl/tree/3c8d973fbb55a7c5d4fb57fb32b3eda2700c24ad" target="_blank">1.5.15</a>
   - Added translation support in filter views list by tags
   - Filter views by tags : use `AND` operator between filter types and `OR` within filter types. 
- <a href="https://github.com/unep-grid/map-x-mgl/tree/c1e7616df923d9860264d79cc461dfa5b6d657d5" target="_blank">1.5.14</a>
   - Removed bug where (empty) private project could be seen when pressing a shared view's "home" button
   - Added support for spanish. Thanks @GianlucaGygax !
   - Updated service workers strategy. Using no-cache in traefik should solve issue where old cache were kept.
   - Modification on entry files for webpack to enable a viewer only mode for the app.
- <a href="https://github.com/unep-grid/map-x-mgl/tree/775e37f9d58f6f51df94bf890a19753f64d43e95" target="_blank">1.5.13</a>
   - Removed a bug where a dashboard was not removed if no source layer where used
   - Use pointer events instead of mouse event
   - Added a 'minimize' button in modal windows
   - Removed resize corner in modal windows – ( it's not widely used and it produced a bug with flexbox )
- <a href="https://github.com/unep-grid/map-x-mgl/tree/0e8c7feae41290071b2fb728cd1ad369974868c0" target="_blank">1.5.12</a>
   - Solved an issue in view button when a zoom was applied in the browser: the nested circle was not well aligned producing a weird effect. Using SVG, the problem as been solved. 
   - Update dependencies, see `app/package.json`
   - Changed the service worker generator to `workbox-webpack-plugin` 
   - Solved #277 where removal of a project did not remove releated views that does not had sources (raster, story, etc). 
- <a href="https://github.com/unep-grid/map-x-mgl/tree/d509c639fc1be78e81405a978a63db1ff5b1d190" target="_blank">1.5.11</a>
   - Solved #276
   - Solved #274
   - Added a function to unregister service worker 
- <a href="https://github.com/unep-grid/map-x-mgl/tree/4c36b899fd5887b21536703eed61ba4c22ebc07f" target="_blank">1.5.10</a>
   - New radial progress svg constructor
   - Direct local storage for views object, in addition to browser cache and service worker cache. Faster. 
   - Bug fixes : label too long in map data properties query popup. Display the full thing on hover.
   - Code cleaning
- <a href="https://github.com/unep-grid/map-x-mgl/tree/d60a48cb841753e2578473a521b8d757cec6d5ff" target="_blank">1.5.9</a>
   - Improvement of road style : added more than 30 layers extracted and modified from style "Lè Shine" (https://frama.link/leshine),
   - Integrated simplified colors setting for roads, road border and building in style editor.
- <a href="https://github.com/unep-grid/map-x-mgl/tree/36fdfebac77231db028b358dd173e4ab9fd4ed7a" target="_blank">1.5.8</a>
   - Solved #272 : the built date was wrong in the encrypted mail validation.
- <a href="https://github.com/unep-grid/map-x-mgl/tree/dfc4013b8b69f572794bc3d691eec366289809af" target="_blank">1.5.7</a>
   - Add service worker to cache assets and tiles,
   - Migrate language dict file to JSON, instead of csv, to be able to merge pull requests more easily,
   - Minor changes.
- <a href="https://github.com/unep-grid/map-x-mgl/tree/50b05b59d95b46ea3835b15d6ced9fc161d50455" target="_blank">1.5.6</a> 
   - Updated version of R,
   - Added api upload for geojson stored client side,
   - Minor changes.
- <a href="https://github.com/unep-grid/map-x-mgl/tree/032f969f49e167aeb8af70dcc899a6fb8f34b169" target="_blank">1.5.5</a>
   - Added query parameter support to filter max role for view fetching : `?filterViewsByRoleMax=public` will show all public views only,
   - Added styling option for map labels :  outline color.
- <a href="https://github.com/unep-grid/map-x-mgl/tree/62f76547809f342ad8c8a3b9c5f7a5ceba02c3ec" target="_blank">1.5.4</a>
  - Faster and more accurate view count without analyzing sequentially every project. It should counts shared views, external views, private views, public views and targeted views for every project of the current user.
- <a href="https://github.com/unep-grid/map-x-mgl/tree/05bd71f1c4bffa9b07e588a160770cb1c539cb84" target="_blank">1.5.3</a>
  - Added a new sharing option : any view can be imported as external, non-modifiable view in a project where the user is at least a publisher,
  - Removed www/ files from git repo : those are built with webpack, not useful to have them around.
- <a href="https://github.com/unep-grid/map-x-mgl/tree/34674b85a3c1d0b34979b40a5fbca8febc0783bd" target="_blank">1.5.2</a>
  - Fixed story map view selection #255,
  - Fixed raster legend size : let the user click to expand the image into a modal,
  - Fixed legend label alignment,
  - Fixed long abstract #253.
- <a href="https://github.com/unep-grid/map-x-mgl/tree/81596c1b7c6ff64740662067ae41080fccf78788" target="_blank">1.5.1</a>
  - Solved bug where user was not able to authenticate when uploading an image,
  - Better legend and description of view content, using multi-column layout.
- <a href="https://github.com/unep-grid/map-x-mgl/tree/2e8249a3142d5f9be01dfd0e5afd4b414ab336f4" target="_blank">1.5.0</a> 
  - Refactoring,
  - Manage by project. It's now possible to manage your data by project, in addition to collections and classes, 
  - Using docker for the whole stack,
  - Merged app and api under the same repository.
